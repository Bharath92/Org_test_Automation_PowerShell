pipelines:
  - name: pipeline_S_PS_UTIL_0036
    steps:
      - name: S_PS_UTIL_0036
        type: PowerShell
        configuration:
          nodePool: win_2019
          environmentVariables:
            foo: "bar"
            test: "pipe"
        execution:
          onExecute:
            - Write-Host $test
            - add_run_variables "test=step1" "hello=world"
            - Write-Host $test
            - if($test -ne "step1"){
              Write-Error "Stop" -ErrorAction Stop
              }
              
      - name: S_PS_UTIL_0036_2
        type: PowerShell
        configuration:
          inputSteps:
            - name: S_PS_UTIL_0036
          nodePool: win_2019
          environmentVariables:
            foo: "bar"
            test: "pipe"
        execution:
          onExecute:
            - Write-Host $test
            - export_run_variables
            - Write-Host $test
            - if($test -ne "step1"){
              Write-Error "Stop" -ErrorAction Stop
              }
            - if($hello -ne "world"){
              Write-Error "Stop" -ErrorAction Stop
              }
