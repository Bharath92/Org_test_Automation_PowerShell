template: true
valuesFilePath: ../values/gitRepoValues.yml

resources:
  # - name: S_PS_UTIL_0032
  #   type: GitRepo
  #   configuration:
  #     gitProvider: s_gitHub
  #     path: {{ .Values.GitHub.Org_test_Automation.path }}

pipelines:
  - name: pipeline_S_PS_UTIL_0032
    steps:
      - name: S_PS_UTIL_0032
        type: PowerShell
        configuration:
          nodePool: win_2019
        execution:
          onExecute:
            - add_run_variables JFROG_CLI_BUILD_NUMBER=${run_id}

      - name: S_PS_UTIL_0032_2
        type: PowerShell
        configuration:
          nodePool: win_2019
          inputSteps:
            - name: S_PS_UTIL_0032
        execution:
          onExecute:
            - export_run_variables
            - if($JFROG_CLI_BUILD_NUMBER -ne ${run_id}){
              Write-Error "Stop" -ErrorAction Stop
              }

      - name: S_PS_UTIL_0032_3
        type: PowerShell
        configuration:
          nodePool: win_2019
          inputSteps:
            - name: S_PS_UTIL_0032_2
        execution:
          onExecute:
            - export_run_variables
            - if($JFROG_CLI_BUILD_NUMBER -ne ${run_id}){
              Write-Error "Stop" -ErrorAction Stop
              }



            